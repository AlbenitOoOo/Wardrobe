



@model ClothDetailsModel

@{ ViewData["Title"] = "Details"; }

<h1 style=" text-align: center;">Zapytanie o kupno</h1>








 
<div style="text-align: -webkit-center; ">
    <div class="col-lg-4">

        <div id="karta" class="card d-flex flex-column" style="width: 300px; margin: 10px auto;">

            <div class="card-body " style="margin-top: 20px; margin: auto;">
                <img src="@("~/image/"+Model.Cloth.CoverImageUrl)" asp-append-version="true" style=" height: 250px; " />

            </div>
            <div id="title">
                @Html.DisplayFor(model => model.Cloth.Title)
            </div>
            <div id="desc">
                @Html.DisplayFor(model => model.Cloth.Description)
            </div>

        </div>

        @using (Html.BeginForm("AddMessage", "Home", FormMethod.Post))
        {
            @Html.HiddenFor(Model => Model.Cloth.Id)
            <p class="text-primary m-0 font-weight-bold">Czat</p>
                            <div class="text-white border rounded border-white shadow-lg tada animated col-sm-3 col-sm-offset-4 frame" style="max-width: 100%;background-color: rgb(214,212,221);" title="td">
                                <ul id="chatlist">
                                    @foreach (var msg in Model.Messages)
                                    {
                                        if (msg.UserName.Equals(User.Identity.Name))
                                        {
                    <li style="width:100%">
                        <div class="msj macro">
                            <div class="text text-l">
                                <p>@msg.UserName</p>
                                <p>@msg.Text</p>
                                <p><small>@msg.Date.ToString("dd-MM-yyyy MM:ss tt")</small></p>
                            </div>
                        </div>
                    </li>
 }
                                        else
                                        {
                    <li style="width:100%;">
                        <div class="msj-rta macro">
                            <div class="text text-r">
                                <p>@msg.UserName</p>
                                <p>@msg.Text</p>
                                <p><small>@msg.Date.ToString("dd-MM-yyyy MM:ss tt")</small></p>
                            </div>
                        </div>
                    </li>
}
                                    }
                                </ul>
                                <div style="width: 100%;">
                                    <div class="msj-rta macro" style="margin: auto;">
                                        <div class="text text-r" style="background: #392e51 !important;">
                                            @*<input type="text" class="mytext" placeholder="Napisz wiadomość" style="color: rgb(255,255,255);">*@
                                            @Html.TextBoxFor(m => m.NewMessage, "", new { @type = "text", @class = "mytext", @color = "white", @placeholder = "Napisz wiadomość" })
                                        </div>
                                    </div>
                                    <button type="submit">Send</button>
                                </div>
                            </div>
                        }


        

    </div>



</div>

<div style=" text-align: center;">
    <a  asp-action="Index">Powrót do listy</a>
</div>


<script src="~/lib/jquery/dist/jquery.min.js"></script>
<script src='~/js/chat.js' type="text/javascript"></script>
<link rel="stylesheet" href="~/css/chat.css" />

<style>
    .mytext {
        color: white;
        
    }
</style>